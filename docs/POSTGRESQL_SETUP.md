#!/bin/bash

echo "ðŸ”§ PostgreSQL Setup Guide - Cara Setup tanpa Password"
echo "========================================================"
echo ""
echo "LANGKAH 1: Temukan file pg_hba.conf"
echo "-----------------------------------"
echo "Jalankan:"
echo "  sudo find /usr/local -name pg_hba.conf 2>/dev/null"
echo "  sudo find /opt -name pg_hba.conf 2>/dev/null"
echo "  sudo find ~/Library -name pg_hba.conf 2>/dev/null"
echo ""
echo "LANGKAH 2: Edit pg_hba.conf"
echo "---------------------------"
echo "Buka file dengan: sudo nano /path/to/pg_hba.conf"
echo ""
echo "Ubah baris yang berisi 'md5' atau 'scram-sha-256' menjadi 'trust':"
echo "Dari: local   all   all   md5"
echo "Ke:   local   all   all   trust"
echo ""
echo "LANGKAH 3: Restart PostgreSQL"
echo "------------------------------"
echo "  brew services restart postgresql@15"
echo "  # atau"
echo "  sudo -u postgres pg_ctl restart -D /path/to/data"
echo ""
echo "LANGKAH 4: Buat Database"
echo "------------------------"
echo "  psql postgres -f /tmp/create_db.sql"
echo ""
echo "LANGKAH 5: Kembalikan ke md5/scram-sha-256"
echo "-------------------------------------------"
echo "Setelah selesai, ubah kembali 'trust' ke 'md5' dan restart PostgreSQL"
echo ""
echo "============================================"
echo "ATAU GUNAKAN CARA INI (LEBIH MUDAH):"
echo "============================================"
echo ""
echo "Jika Anda menggunakan Homebrew PostgreSQL:"
echo "  brew services stop postgresql@15"
echo "  brew services start postgresql@15"
echo ""
echo "Lalu coba:"
echo "  createuser -s erp_admin"
echo "  createdb -O erp_admin erp_ikodio_db"
echo "  psql -d erp_ikodio_db -c \"ALTER USER erp_admin WITH PASSWORD 'Mi2525252512';\""
echo ""
